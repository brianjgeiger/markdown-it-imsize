"use strict";function youtube_parser(e){var o=/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#\&\?]*).*/,i=e.match(o);return i&&11==i[7].length?i[7]:e}function vimeo_parser(e){var o=/https?:\/\/(?:www\.|player\.)?vimeo.com\/(?:channels\/(?:\w+\/)?|groups\/([^\/]*)\/videos\/|album\/(\d+)\/video\/|)(\d+)(?:$|\/|\?)/,i=e.match(o);return i?i[3]:e}function video_embed(e){function o(o,i){var r,t,n,s,u="",d=(o.pos,o.posMax,/@\[(youtube|vimeo)\]\([\s]*(.*?)[\s]*[\)]/im);if(64!==o.src.charCodeAt(o.pos))return!1;if(91!==o.src.charCodeAt(o.pos+1))return!1;var a=d.exec(o.src);if(!a)return!1;if(a.length<3)return!1;var v=a[1],u=a[2];if("youtube"==v.toLowerCase()?u=youtube_parser(u):"vimeo"==v.toLowerCase()&&(u=vimeo_parser(u)),")"===u&&(u=""),t=o.pos+2,r=e.helpers.parseLinkLabel(o,o.pos+1,!1),!i){o.pos=t,o.posMax=r,o.service=o.src.slice(t,r);var l=new o.md.inline.State(v,o.md,o.env,n=[]);l.md.inline.tokenize(l),s=o.push("video",""),s.videoID=u,s.service=v,s.level=o.level}return o.pos=o.pos+o.src.indexOf(")"),o.posMax=o.tokens.length,!0}return o}function tokenize_youtube(e){var o='<div><iframe class="embed-responsive-item" id="ytplayer" type="text/html" width="640" height="390" src="https://www.youtube.com/embed/',i='" frameborder="0"></iframe></div>';return o+e+i}function tokenize_vimeo(e){var o='<div><iframe class="embed-responsive-item" id="vimeoplayer" width="500" height="281" src="https://player.vimeo.com/video/',i='" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe></div>';return o+e+i}function tokenize_video(e){function o(o,i){var r=e.utils.escapeHtml(o[i].videoID),t=e.utils.escapeHtml(o[i].service);return""===r?"":"youtube"===t.toLowerCase()?tokenize_youtube(r):"vimeo"===t.toLowerCase()?tokenize_vimeo(r):""}return o}function video_plugin(e){e.renderer.rules.video=tokenize_video(e),e.inline.ruler.before("emphasis","video",video_embed(e))}"undefined"==typeof module||"undefined"==typeof module.exports?window.markdownitVideo=video_plugin:module.exports=video_plugin;